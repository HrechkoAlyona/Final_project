require('dotenv').config(); // Ð’ÑÐµÐ³Ð´Ð° Ð² ÑÐ°Ð¼Ð¾Ð¼ Ð²ÐµÑ€Ñ…Ñƒ
const express = require('express');
const cors = require('cors');
const connectDB = require('./config/db'); // 1 Ð˜Ð¼Ð¿Ð¾Ñ€Ñ‚Ð¸Ñ€ÑƒÐµÐ¼ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ Ðº Ð‘Ð”
const commentRoutes = require('./routes/commentRoutes');

const app = express(); //  Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð¸Ñ€ÑƒÐµÐ¼ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ


connectDB(); // 2. Ð—Ð°Ð¿ÑƒÑÐºÐ°ÐµÐ¼ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ. Ð¾Ð´ÐºÐ»ÑŽÑ‡Ð°ÐµÐ¼ÑÑ Ðº MongoDB Atlas

// ÐœÐ¸Ð´Ð»Ð²Ð°Ñ€Ñ‹
app.use(cors());
app.use(express.json()); 

// (ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡Ð°ÐµÐ¼) Ð¸Ð¼Ð¿Ð¾Ñ€Ñ‚Ð¸Ñ€ÑƒÐµÐ¼ Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚Ñ‹
const authRoutes = require('./routes/authRoutes');
const postRoutes = require('./routes/postRoutes');
const likeRoutes = require('./routes/likeRoutes');


//  Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚Ñ‹
app.use('/api/auth', authRoutes);
app.use('/api/posts', postRoutes);
app.use('/api/likes', likeRoutes);
app.use('/api/comments', commentRoutes);

const PORT = process.env.PORT || 5005;

app.get('/', (req, res) => {
    res.send('Ð¡ÐµÑ€Ð²ÐµÑ€ Ð¸ Ð‘Ð°Ð·Ð° Ð”Ð°Ð½Ð½Ñ‹Ñ… Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÑŽÑ‚!');
});

app.listen(PORT, () => {
    console.log(`ðŸš€ Ð¡ÐµÑ€Ð²ÐµÑ€ Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½ Ð½Ð° Ð¿Ð¾Ñ€Ñ‚Ñƒ ${PORT}`);
});